A51 MACRO ASSEMBLER  PROJETOEMASM                                                         05/22/2025 11:29:01 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
NO OBJECT MODULE REQUESTED
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE ProjetoEmAsm.a51 SET(SMALL) DEBUG PRINT(.\Listings\ProjetoEmAsm.lst) OB
                      JECT(.\Objects\ProjetoEmAsm.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;Constantes
  0064                 2     fimTempo        EQU 100;
                       3     
                       4     ;PortaLeds
  0090                 5     ledVerde   EQU P1.0;
  0091                 6     ledVermelho EQU P1.1;
  0092                 7     ledAmarelo EQU P1.2;
                       8     
                       9     ;Porta da barreira e do sensor
  0093                10     barreira   EQU P1.3;
  0094                11     sensor     EQU P1.4;
                      12     
                      13     ;Porta Estacionamento
  0080                14     LedsEstacionamento EQU P0;
                      15     
                      16     ;display de 7 egmento 
  00A0                17     display7seg EQU P2;
                      18     
                      19     ;variaveis globais
  001E                20     pressionado     EQU 30;
  0020                21     botao           EQU 32;
  0022                22     conta           EQU 34;
  0024                23     constaSegundo   EQU 36;
  0026                24     passoucarro     EQU 38;
                      25     
                      26     ;inicio
----                  27     cseg at 0
0000 804E             28     jmp main
                      29     
                      30     ;interrupcao esterna 0
----                  31     cseg at 0x3
0003 8042             32     jmp External0_ISR
                      33     
                      34     ;interrupcao esteterna 1
----                  35     cseg at 0x4
0004 8048             36     jmp External1_ISR
                      37     
                      38     ;Interropcao do timer0
----                  39     cseg at 0Xb
000B 8048             40     jmp Timer0_ISR
                      41     
                      42     ;inicializacoes
000D                  43     Init:
                      44     
                      45         ;Configuracao Registo IE
000D D2AF             46         setb EA; ativa interrupcoes globais
000F D2A9             47         setb ET0;ativa interrupcao timer0
0011 D2A8             48         setb EX0;ativa interrupcao externa 0
0013 D2AA             49         setb EX1;ativa interrupcao externa 1
                      50     
                      51         ;Configuracao reisto TMOD
0015 5389F0           52         anl TMOD, #0xF0 ;limpa os 4 bits do timer0
0018 438902           53         orl TMOD, #0x02;modo 2 do timer 0
                      54     
                      55         ;Configuracao timer 0 - 200us
001B 758C38           56         mov TH0, #0x38; Timer 0 - 200
001E 758A38           57         mov TL0, #0x38
A51 MACRO ASSEMBLER  PROJETOEMASM                                                         05/22/2025 11:29:01 PAGE     2

                      58     
                      59         ;Configuracao registos TCON
0021 D28C             60         setb TR0; comeca o timer 0
0023 D288             61         setb IT0; interrupcao ativa a falling edge
                      62         
                      63         ;inicializacao das variaveis
0025 85001E           64         mov pressionado, 0;
0028 850022           65         mov conta, 0;
002B 850020           66         mov botao, 0;
002E 850026           67         mov passoucarro, 0;
                      68     
                      69         ;Configuracao dos pinos
0031 850000           70         mov ledVerde , 0; led verde ligado
*** _________________________________^
*** ERROR #A48 IN 70 (ProjetoEmAsm.a51, LINE 70): DATA-ADDRESS EXPECTED
0034 750001           71         mov ledVermelho , #1; Led vermelho desligado
*** _________________________________^
*** ERROR #A48 IN 71 (ProjetoEmAsm.a51, LINE 71): DATA-ADDRESS EXPECTED
0037 750001           72         mov ledAmarelo , #1; Led amarelo desligado
*** _________________________________^
*** ERROR #A48 IN 72 (ProjetoEmAsm.a51, LINE 72): DATA-ADDRESS EXPECTED
003A                  73         mov barrreira , #0; barreira para baixo
*** _________________________________^
*** ERROR #A45 IN 73 (ProjetoEmAsm.a51, LINE 73): UNDEFINED SYMBOL (PASS-2)
003D 750000           74         mov sensor , #0; sensor desligado
*** _________________________________^
*** ERROR #A48 IN 74 (ProjetoEmAsm.a51, LINE 74): DATA-ADDRESS EXPECTED
0040 758000           75         mov LedsEstacionamento , #0 ; todos os leds ligados
0043 8508A0           76         mov display7seg , 8; display 7 segmentos com o numero 8
                      77     
0046 22               78     ret
                      79     
                      80     ;interrupcao esterna 0
0047                  81     External0_ISR:
0047 752000           82         mov botao, #0; assinala que o botao de sair foi pressionado
004A 751E01           83         mov pressionado, #1;assinala que o botao foi pressionado
004D 32               84     reti
                      85     
                      86     ;interrupcao esterna 1
004E                  87     External1_ISR:
004E 752001           88         mov botao, #1; assinala que o botao fde entrar foi pressionado
0051 751E01           89         mov pressionado, #1;assinala que o botao foi pressionado
                      90     
0054 32               91     reti
                      92     
                      93     ;Interrupcao timer 0
0055                  94     Timer0_ISR:
0055 0522             95         inc conta; incrementa a contagem dos 200us
0057 32               96     reti
                      97     
----                  98     cseg at 0x50
0050                  99     main:
0050 758107          100         mov sp,#7;inicializacao da stack
                     101         cmp conta, #0xFF; verifica se ja passaram 200ms
*** _____________________________^
*** ERROR #A9 IN 101 (ProjetoEmAsm.a51, LINE 101): SYNTAX ERROR
0053 60FB            102         jz main; se nao passaram 200ms, volta a verificar
0055 752200          103         mov conta, #0; reinicia a contagem
0058 0580            104         inc LedsEstacionamento
005A                 105         rl ledsEstacionamento
*** ________________________________^
*** ERROR #A39 IN 105 (ProjetoEmAsm.a51, LINE 105): REGISTER OPERAND EXPECTED
005A 80F4            106     jmp main
                     107     END
A51 MACRO ASSEMBLER  PROJETOEMASM                                                         05/22/2025 11:29:01 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

BARREIRA . . . . .  B ADDR   0090H.3 A   
BARRREIRA. . . . .    ----   -----       
BOTAO. . . . . . .  N NUMB   0020H   A   
CMP. . . . . . . .    ----   -----       
CONSTASEGUNDO. . .  N NUMB   0024H   A   
CONTA. . . . . . .  N NUMB   0022H   A   
DISPLAY7SEG. . . .  D ADDR   00A0H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
EX0. . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
EXTERNAL0_ISR. . .  C ADDR   0047H   A   
EXTERNAL1_ISR. . .  C ADDR   004EH   A   
FIMTEMPO . . . . .  N NUMB   0064H   A   
INIT . . . . . . .  C ADDR   000DH   A   
IT0. . . . . . . .  B ADDR   0088H.0 A   
LEDAMARELO . . . .  B ADDR   0090H.2 A   
LEDSESTACIONAMENTO  D ADDR   0080H   A   
LEDVERDE . . . . .  B ADDR   0090H.0 A   
LEDVERMELHO. . . .  B ADDR   0090H.1 A   
MAIN . . . . . . .  C ADDR   0050H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
PASSOUCARRO. . . .  N NUMB   0026H   A   
PRESSIONADO. . . .  N NUMB   001EH   A   
SENSOR . . . . . .  B ADDR   0090H.4 A   
SP . . . . . . . .  D ADDR   0081H   A   
TH0. . . . . . . .  D ADDR   008CH   A   
TIMER0_ISR . . . .  C ADDR   0055H   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 7 ERROR(S)
